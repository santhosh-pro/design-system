<ng-template #filtersTpl>
  <ng-content select="[table-filter]"></ng-content>
</ng-template>

@if (!isMobile()) {
  <ui-data-table
    [columnGroups]="columnGroups()"
    [data]="data()"
    [totalCount]="totalCount()"
    [isLoading]="isLoading()"
    [hasError]="hasError()"
    [errorMessage]="errorMessage()"
    [pageSize]="pageSize()"
    [enableSearch]="enableSearch()"
    [enablePagination]="enablePagination()"
    [enableRowSelection]="enableRowSelection()"
    [enableClickableRows]="enableClickableRows()"
    [rowSelectionKey]="rowSelectionKey()"
    [defaultSelectedKeys]="defaultSelectedKeys()"
    [expandableComponent]="expandableComponent()"
    [footerComponent]="footerComponent()"
    [enableHorizontallyScrollable]="enableHorizontallyScrollable()"
    [initialValue]="initialValue()"
    [showLoadingOnlyInitial]="showLoadingOnlyInitial()"
  [filtersTemplate]="filtersTemplate() || filtersTpl"
    (pageChange)="pageChange.emit($event)"
    (sortChange)="sortChange.emit($event)"
    (stateChange)="stateChange.emit($event)"
    (action)="action.emit($event)"
    (rowClick)="rowClick.emit($event)"
    (rowSelectionChange)="rowSelectionChange.emit($event)"
    (footerAction)="footerAction.emit($event)">
    <!-- Re-project header action content to child table -->
    <div class="min-w-0">
      <ng-content select="[table-action]"></ng-content>
    </div>
    <!-- Re-project filters too (even though overlay uses the template input), harmless and future-proof -->
    <ng-content select="[table-filter]"></ng-content>
  </ui-data-table>
} @else {
  <ui-mobile-data-table
    [columnGroups]="columnGroups()"
    [data]="data()"
    [totalCount]="totalCount()"
    [isLoading]="isLoading()"
    [hasError]="hasError()"
    [errorMessage]="errorMessage()"
    [pageSize]="pageSize()"
    [enableSearch]="enableSearch()"
    [enablePagination]="enablePagination()"
    [enableRowSelection]="enableRowSelection()"
    [enableClickableRows]="enableClickableRows()"
    [rowSelectionKey]="rowSelectionKey()"
    [defaultSelectedKeys]="defaultSelectedKeys()"
    [expandableComponent]="expandableComponent()"
    [footerComponent]="footerComponent()"
    [initialValue]="initialValue()"
    [showLoadingOnlyInitial]="showLoadingOnlyInitial()"
  [filtersTemplate]="filtersTemplate() || filtersTpl"
    (pageChange)="pageChange.emit($event)"
    (sortChange)="sortChange.emit($event)"
    (stateChange)="stateChange.emit($event)"
    (action)="action.emit($event)"
    (rowClick)="rowClick.emit($event)"
    (rowSelectionChange)="rowSelectionChange.emit($event)"
    (footerAction)="footerAction.emit($event)">
    <!-- Re-project action and filter content to mobile table if needed in future -->
    <ng-content select="[table-action]"></ng-content>
    <ng-content select="[table-filter]"></ng-content>
  </ui-mobile-data-table>
}
