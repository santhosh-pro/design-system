<tbody class="relative z-0 flex-1">
      @for (item of data(); track getItemId(item); let i = $index) {
        <tr (click)="onRowClicked(item)"
          class="transition-all duration-200 hover:bg-blue-50 bg-white border-b border-gray-200 group"
          [class.cursor-pointer]="enableClickableRows()"
          [class.bg-blue-100]="isRowSelected(item)"
          [class.hover:bg-blue-200]="isRowSelected(item)">

          <!-- Expandable Column -->
          @if (enableExpandable()) {
            <td class="sticky left-0 z-10 bg-white w-12 px-4 py-4 text-center border-r-2 border-gray-300 shadow-[2px_0_4px_rgba(0,0,0,0.05)] group-hover:bg-blue-50 transition-colors duration-200"
              [class.bg-blue-100]="isRowSelected(item)" [class.group-hover:bg-blue-200]="isRowSelected(item)">
              <div (click)="onRowExpanded(i); $event.stopPropagation()"
                class="mx-auto flex items-center justify-center h-[40px] w-[40px] rounded-full bg-gray-50 hover:bg-gray-100 cursor-pointer transition-all duration-500">
                <svg class="h-[20px] w-[20px] text-gray-500 transition-transform duration-300" 
                  [class.rotate-180]="expandedRowIndex() === i"
                  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">
                  <path d="M7.41 8.58L12 13.17L16.59 8.58L18 10L12 16L6 10L7.41 8.58Z" fill="currentColor" />
                </svg>
              </div>
            </td>
          }

          <!-- Checkbox Column -->
          @if (enableRowSelection()) {
            <td class="sticky left-0 z-10 bg-white w-12 px-4 py-4 text-center border-r-2 border-gray-300 shadow-[2px_0_4px_rgba(0,0,0,0.05)] group-hover:bg-blue-50 transition-colors duration-200"
              [class.bg-blue-100]="isRowSelected(item)" [class.group-hover:bg-blue-200]="isRowSelected(item)">
              <input type="checkbox" [formControl]="getItemControl(item)"
                class="h-4 w-4 accent-primary-600 focus:ring-primary-500 disabled:accent-gray-400 disabled:opacity-60 cursor-pointer"
                aria-label="Select row" />
            </td>
          }

          <!-- Data Columns -->
          @for (column of columns(); track column.key || $index) {
            <td class="px-4 py-4 relative text-sm text-gray-900 bg-white border-r border-gray-200 group-hover:bg-blue-50 transition-colors duration-200"
              [ngClass]="getCellClass(column)"
              [class.bg-blue-100]="isRowSelected(item)"
              [class.group-hover:bg-blue-200]="isRowSelected(item)">
              <ui-table-cell-renderer 
                [column]="column"
                [rowData]="item"
                [rowIndex]="i + 1"
                [isLastRow]="$last"
                (actionPerformed)="onActionPerformed($event)">
              </ui-table-cell-renderer>
            </td>
          }
        </tr>

        <!-- Expanded Row -->
        @if (enableExpandable() && i === expandedRowIndex()) {
          <tr class="transition-all duration-700">
            <td [attr.colspan]="getTotalColumns()">
              <div class="mx-4 my-4 p-4 bg-gray-50 rounded-lg">
                @if (expandableComponent()) {
                  <ui-dynamic-renderer 
                    [component]="expandableComponent()" 
                    [rowData]="item"
                    (actionPerformed)="onActionPerformed({ actionKey: 'expand', item })">
                  </ui-dynamic-renderer>
                }
              </div>
            </td>
          </tr>
        }
      }
    </tbody>