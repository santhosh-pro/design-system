<ui-base-input #inputElement [title]="label()" [width]="width()" [isRequiredField]="hasRequiredValidator()">
  <!-- Input Slot -->
  <div input
    class="relative flex items-center w-full bg-white border border-[var(--color-primary-400)] rounded-md shadow-sm ring-1 ring-[var(--color-primary-400)] focus-within:ring-2 transition-all"
    [ngClass]="{
         'border-error-600 ring-error-600 focus-within:ring-2': formControl.touched && formControl.errors,
        '!border-gray-500 !ring-0 focus-within:!ring-2 focus-within:!ring-[var(--color-primary-500)] focus-within:!border-[var(--color-primary-500)]': !(formControl.touched && formControl.errors),
         'bg-neutral-100 cursor-not-allowed': formControl.disabled,
       }">
    <!-- Input Field -->
    <div class="relative flex items-center flex-1">
      @if (iconSrc()) {
        <ui-svg-icon [size]="18" [src]="iconSrc()!" class="absolute ml-3 text-neutral-400 pointer-events-none"></ui-svg-icon>
      }
      <input
        (input)="onInput($any($event.target)?.value)"
        class="h-[46px] flex-1 bg-transparent border-none outline-none placeholder-neutral-400 text-black focus:ring-0"
        [class.pl-10]="iconSrc()"
        [class.pl-3]="!iconSrc()"
        [class.text-neutral-400]="formControl.disabled"
        [formControl]="formControl"
        [type]="showPassword() ? 'text' : 'password'"
        [placeholder]="placeholder()"
        (focus)="onFocus()"
        (blur)="onBlur()"
        style="outline: none !important; box-shadow: none !important;">
      @if (showEye()) {
        <div (click)="togglePasswordVisibility()" class="absolute right-2 p-2 flex justify-center items-center hover:bg-neutral-100 rounded-full cursor-pointer transition-colors">
          @if (showPassword()) {
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#737373" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-neutral-400 hover:text-[var(--color-primary-500)] transition-colors">
              <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
              <circle cx="12" cy="12" r="3"></circle>
              <line x1="2" y1="2" x2="22" y2="22"></line>
            </svg>
          } @else {
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#737373" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-neutral-400 hover:text-[var(--color-primary-500)] transition-colors">
              <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
          }
        </div>
      }
    </div>
  </div>

  <!-- Error Slot - Fixed condition -->
  @if (formControl.touched && formControl.errors) {
    <div error class="ml-2 text-left">
      <span class="text-xs text-[var(--color-error-500)]">{{ formControl.errors | humanizeFormMessages: errorMessages() }}</span>
    </div>
  } @else if (showErrorSpace()) {
    <div error class="text-left">
      <span class="text-xs text-transparent">.</span>
    </div>
  }
</ui-base-input>