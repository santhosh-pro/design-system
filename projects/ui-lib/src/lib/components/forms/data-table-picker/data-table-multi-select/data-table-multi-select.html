<ui-base-input
  [title]="label()"
  [fullWidth]="fullWidth()"
  [isRequiredField]="hasRequiredValidator()"
>
  <div input class="relative">
    <div
      class="flex items-center h-[46px] w-full bg-white border border-neutral-200 rounded-md shadow-sm cursor-pointer focus-within:ring-2 focus-within:ring-primary-400 transition-all overflow-hidden select-none"
      [class.border-red-500]="hasErrors()"
      [class.ring-red-400]="hasErrors()"
      tabindex="0"
      (click)="openDialog()"
      (focus)="onFocus()"
      (blur)="onBlur()"
      (keydown.enter)="openDialog()"
      (keydown.space)="$event.preventDefault(); openDialog()"
    >
      <span class="text-sm truncate flex-1 px-3" [class.text-neutral-400]="!displayText().length">
        {{ displayText() || placeholder() || 'Select items' }}
      </span>
      @if (displayText().length) {
        <button
          (click)="clearAll($event); $event.stopPropagation()"
          class="mr-2 p-1 text-red-500 hover:bg-red-50 rounded-full"
          type="button"
          aria-label="Clear selection"
        >
          <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">
            <path
              d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"
              fill="currentColor"
            />
          </svg>
        </button>
      }
      <div class="pointer-events-none mr-2">
        <svg class="w-4 h-4 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </div>
    </div>
  </div>
  <div error class="mt-1">
    @if (formControl && formControl.errors && hasErrors()) {
      <span class="text-caption text-red-500">{{ formControl.errors | humanizeFormMessages: errorMessages() }}</span>
    } @else if (showErrorSpace()) {
      <span class="text-caption text-transparent">.</span>
    }
  </div>
</ui-base-input>