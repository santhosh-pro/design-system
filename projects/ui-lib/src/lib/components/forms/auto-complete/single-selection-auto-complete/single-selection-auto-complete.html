<ui-base-input
  [title]="label()"
  [fullWidth]="fullWidth()"
  [isRequiredField]="hasRequiredValidator()"
  class="w-full"
>
  <div #inputContainer input class="relative w-full">
    <input
      #searchInput
      type="text"
      class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed placeholder-gray-400"
      [ngClass]="{'border-red-500 ring-red-500': hasErrors()}"
      [disabled]="isDisabled()"
      [value]="searchText()"
      (input)="onSearchInput($event)"
      (blur)="markTouched()"
      (keydown)="handleKeydown($event)"
      placeholder="{{ placeholder() }}"
      aria-autocomplete="list"
      aria-controls="autocomplete-list"
      aria-expanded="false"
    />
    @if (showDropdown()) {
      <ui-autocomplete-dropdown
        [options]="options()"
        [displayProperty]="displayProperty()"
        [displayTemplate]="displayTemplate()"
        [iconSrc]="iconSrc()"
        [dynamicIconPath]="dynamicIconPath()"
        [imageUrl]="imageUrl()"
        [dynamicImageUrlPath]="dynamicImageUrlPath()"
        [iconColor]="iconColor()"
        [dynamicIconColorPath]="dynamicIconColorPath()"
        [valueProperty]="valueProperty()"
        [itemWidth]="itemWidth()"
        [noDataMessage]="noDataMessage()"
        [highlightedIndex]="highlightedIndex()"
        [selectedValue]="formControl.value"
        (itemClick)="onItemClick($event)"
        (imageLoad)="onImageLoad($event)"
        (highlightedIndexChange)="highlightedIndex.set($event)"
        [ngStyle]="{ 'width': dropdownWidth() + 'px', 'position': 'absolute', 'top': isDropUp() ? 'auto' : '100%', 'bottom': isDropUp() ? '100%' : 'auto', 'left': '0', 'z-index': '50' }"
      ></ui-autocomplete-dropdown>
    }
  </div>

  <div error>
    @if (hasErrors()) {
      <p class="text-xs text-red-600 mt-1">
        {{ formControl.errors ? (formControl.errors | humanizeFormMessages: errorMessages()) : '' }}
      </p>
    }
  </div>
</ui-base-input>